var taskProjectApp=angular.module("taskProjectApp",["ngCookies"]);taskProjectApp.controller("TaskProjectCtrl",["$scope","$http","$cookies",function(t,e,s){t.showBlockProjects=!1,t.showBlockTask=!1;var o=s.get("session");t.activeClass=function(e){return e===t.activeProject?"active":""},getSession=function(){var t;return e({method:"POST",url:"https://api-test-task.decodeapps.io/signup"}).then(function(e){s.put("session",e.data.session),t=e.data.session},function(){}),t},getUser=function(s){e({method:"GET",url:"https://api-test-task.decodeapps.io/account?session="+s}).then(function(e){console.log(e),t.userAvatar=e.data.Account.image_url,t.name=e.data.Account.username},function(){})},getProjects=function(s){e({method:"GET",url:"https://api-test-task.decodeapps.io/projects?session="+s}).then(function(e){console.log(e),t.projects=e.data.projects,t.activeProject=e.data.projects[0].Project.id,getTasks(s,t.activeProject,20,20)},function(){})},getTasks=function(s,o,n,a){e({method:"GET",url:"https://api-test-task.decodeapps.io/tasks?session="+s+"&project_id="+o+"&paging_size="+n+"&paging_offset="+a}).then(function(e){console.log(e),t.tasksCount=e.data.tasks.length},function(){})},createTask=function(t,s,o,n){var a;return e({method:"POST",url:"https://api-test-task.decodeapps.io/tasks/task?session="+t+"&Project.id="+s+"&Task.title="+o+"&Task.description="+n}).then(function(t){console.log(t)},function(){}),a},t.init=function(){var t=s.get("session");void 0==t&&getSession(),e({method:"GET",url:"https://api-test-task.decodeapps.io/session?session="+t}).then(function(e){if(console.log(e),"OK"==e.statusText)getUser(t),getProjects(t);else{var s=getSession();getUser(s),getProjects(t)}},function(){})},t.openTasks=function(e){var o=s.get("session");t.activeProject=e,getTasks(o,t.activeProject,20,20)},t.addTask=function(){createTask(o,t.activeProject,t.taskNameAdd,t.taskDescriptionAdd)},t.openProjectPage=function(){t.showBlockProjects=!0,t.bgStyle={opacity:"0.8"}},t.closeProjectPage=function(){t.showBlockProjects=!1,t.bgStyle={opacity:"1"}},t.openTaskPage=function(){t.showBlockTask=!0,t.bgStyle={opacity:"0.8"}},t.closeTaskPage=function(){t.showBlockTask=!1,t.bgStyle={opacity:"1"}}}]);